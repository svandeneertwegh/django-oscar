{% extends "oscar/dashboard/base.html" %}

{% load category_tags %}
{% load dashboard_tags %}
{% load i18n %}
{% load static %}

{% block styles %}
    <link rel="stylesheet" type="text/css" href="{% static "oscar/css/dashboard.css" %}"/>
    <link rel="stylesheet" href="{% static 'oscar/css/dashboard-bt5.css' %}"/>
{% endblock %}

{% block extrastyles %}
    {{ block.super }}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" integrity="sha512-nMNlpuaDPrqlEls3IX/Q56H36qvBASwb3ipuo3MxeWbsQB1881ox0cRv7UPTgBlriqoynt35KjEwgGUeUXIPnw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css" integrity="sha512-jnSuA4Ss2PkkikSOLtYs8BlYIeeIK1h99ty4YfvRPAlzr377vr3CXDb7sb7eEEBYjDtcYj+AjBH3FLv5uSJuXg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@eonasdan/tempus-dominus@6.9.4/dist/css/tempus-dominus.min.css" crossorigin="anonymous">
{% endblock %}

{% block title %}
    {% trans "Dashboard" %} | {{ block.super }}
{% endblock %}

{% block layout %}

    <div class="main-container d-flex">
        <div class="sidebar" id="side_nav">
            <div class="header-box">
                <div class="brand">
                    <a href="/">
                        <img src="{% static 'oscar/img/ui/dashboard/logo_oscar.png' %}" alt=""/>
                    </a>
                </div>
                <div class="user_status">{{ user.get_full_name|default:request.user.email }}</div>
            </div>
            <div class="divider"></div>

            {% block dashboard_nav %}
                {% dashboard_navigation user as nav_items %}
                <ul class="navlist px-2">
                    <!-- Add icons to the links using the .nav-icon class
                         with font-awesome or any other icon font library -->
                    {% dashboard_navigation user as nav_items %}
                    {% for item in nav_items %}
                        <li {% if item.has_children %}class="dropdown"{% endif %}>
                            <a class="text-decoration-none px-3 py-2 d-block "
                                {% if item.has_children %}
                               data-bs-toggle="dropdown"
                               class="dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-haspopup="true"
                               aria-expanded="false"
                                {% endif %}
                               href="{% if item.is_heading %}#{% else %}{{ item.url }}{% endif %}">
                                {% if item.icon %}<i class="icon-left {{ item.icon }}"></i>{% endif %}
                                {{ item.label }}
                                {% if item.has_children %}<i class="fas fa-angle-left icon-right"></i>{% endif %}
                            </a>

                            {% if item.has_children %}
                                <ul class="dropdown-menu">
                                    {% for subitem in item.children %}
                                        <li>
                                            <a href="{{ subitem.url }}">
                                                {% if subitem.icon %}<i class="{{ subitem.icon }}"></i>{% endif %}
                                                {{ subitem.label }}
                                            </a>
                                        </li>
                                    {% endfor %}
                                </ul>
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
            {% endblock dashboard_nav %}
        </div>
        <div class="content">
            <div class="content-wrapper">
                <section class="content">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-md-12">
                                {% block header %}
                                    <div class="page-header">
                                        <h1>{% block headertext %}{% endblock %}</h1>
                                    </div>
                                {% endblock %}
                                {% include 'oscar/dashboard/partials/alert_messages.html' %}
                                <div class="breadcrumbs">
                                    {% block breadcrumbs %}
                                        <nav aria-label="breadcrumb">
                                            <ol class="breadcrumb">
                                                <li class="breadcrumb-item active" aria-current="page">
                                                    <a href="{% url 'dashboard:index' %}">{% trans "Dashboard" %}</a>
                                                </li>
                                            </ol>
                                        </nav>
                                    {% endblock %}
                                </div>
                                {% block content %}
                                    {% block dashboard_content %}
                                    {% endblock dashboard_content %}
                                {% endblock content %}
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
{% endblock %}

{# Local scripts #}
{% block scripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.2/umd/popper.min.js" integrity="sha512-2rNj2KJ+D8s1ceNasTIex6z4HWyOnEYLVC3FigGOmyQCZc2eBXKgOxQmo3oKLHyfcj53uz4QMsRCWNbLd32Q1g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.min.js" integrity="sha512-ykZ1QQr0Jy/4ZkvKuqWn4iF3lqPZyij9iRv6sGqLRdTPkY69YX6+7wvVGmsdBbiIfN/8OdsI7HABjvEok6ZopQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="{% static 'oscar/js/oscar/ui.js' %}"></script>
{% endblock %}

{% block extrascripts %}
    {{ block.super }}

    {# jQuery plugins #}
    <script src="{% static "oscar/js/mousewheel/jquery.mousewheel.js" %}"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/@eonasdan/tempus-dominus@6.9.4/dist/js/tempus-dominus.min.js" crossorigin="anonymous"></script>
    
    <script src="{% static "oscar/js/inputmask/jquery.inputmask.min.js" %}"></script>
   
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js" integrity="sha512-2ImtlRlf2VVmiGZsjm9bEyhjGW4dU7B6TNwh/hx/iSByxNENtj3WVE6o/9Lj4TJeVXPi4bnOIMXFIJJAeufa0A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="{% static "oscar/js/jquery-sortable/jquery-sortable-min.js" %}"></script>
    <script src="{% static "oscar/js/oscar/dashboard.js" %}"></script>
    <script src="{% static "oscar/js/oscar/RelatedObjectLookups.js" %}"></script>
    <script src="{% static "oscar/js/tinymce/tinymce.min.js" %}"></script>
    <script src="{% static "oscar/js/tinymce/jquery.tinymce.min.js" %}"></script>
{% endblock %}

{% block onbodyload %}
    {{ block.super }}

    $('.dropdown').on('show.bs.dropdown', function (e) {
    $(this).find('.dropdown-menu').first().stop(true, true).slideDown(300);
    });

    $('.dropdown').on('hide.bs.dropdown', function (e) {
    $(this).find('.dropdown-menu').first().stop(true, true).slideUp(200);
    });

    $('input[type="checkbox"]').removeClass("form-control");

    // Javascript to enable link to tab
    var url = document.location.toString();
    if (url.match('#')) {
    $('.bs-docs-sidenav a[href="#' + url.split('#')[1] + '"]').tab('show');
    }

    // Change hash for page-reload
    $('.nav-list a').on('shown.bs.tab', function (e) {
    window.location.hash = e.target.hash;
    });

    options = {
    'languageCode': '{{ LANGUAGE_CODE }}'
    };
    oscar.dashboard.init(options);
{% endblock %}
